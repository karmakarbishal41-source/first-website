<!DOCTYPE html>
<html>
<head>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<style>
body{margin:0;background:#0d1117;color:#00ff9c;font-family:monospace;display:flex;}
.sidebar{width:220px;background:black;height:100vh;padding:20px;}
.sidebar button{display:block;width:100%;margin:10px 0;padding:10px;background:black;border:1px solid #00ff9c;color:#00ff9c;}
.main{flex:1;padding:20px;}
.card{border:1px solid #00ff9c;padding:20px;margin:20px 0;}
input{padding:10px;background:black;border:1px solid #00ff9c;color:#00ff9c;}
</style>

</head>
<body>

<div class="sidebar">
<h3>Cyber System</h3>
<button onclick="show('terminal')">Terminal</button>
<button onclick="show('profile')">Profile</button>
<button onclick="show('ai')">AI</button>
<button onclick="admin()">Admin</button>
<button onclick="logout()">Logout</button>
</div>

<div class="main">

<div id="terminal" class="card">
<h2>Advanced Terminal</h2>
<div id="output"></div>
<input id="cmd">
<button onclick="run()">Run</button>
</div>

<div id="profile" class="card" style="display:none">
<h2>Profile</h2>
<p id="user"></p>
</div>

<div id="ai" class="card" style="display:none">
<h2>AI Assistant</h2>
<input id="question">
<button onclick="askAI()">Ask</button>
<p id="answer"></p>
</div>

</div>

<script>

const firebaseConfig={
apiKey:"AIzaSyB3ofBLYop3CIOKcE4PaFOyo3pGa4Aa8QM",
authDomain:"cyberdashboard-4ee87.firebaseapp.com",
projectId:"cyberdashboard-4ee87",
appId:"1:133424629804:web:6457a1eb1282cc88ada989"
};

firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();

let currentUser;

auth.onAuthStateChanged(user=>{

if(!user) location="index.html";

currentUser=user;

userDiv.innerText="Email: "+user.email;

db.collection("logs").add({
email:user.email,
action:"login",
time:Date.now()
});

});

function show(id){
terminal.style.display="none";
profile.style.display="none";
ai.style.display="none";
document.getElementById(id).style.display="block";
}

function logout(){
auth.signOut();
location="index.html";
}

function admin(){
if(currentUser.email==="admin@gmail.com"){
location="admin.html";
}else{
alert("Not Admin");
}
}

/* Terminal */

async function run(){

let cmd=cmdInput.value;
let out=output;

if(cmd==="help") out.innerHTML+="help whoami date scan hash ip<br>";
else if(cmd==="whoami") out.innerHTML+="Cyber User<br>";
else if(cmd==="date") out.innerHTML+=new Date()+"<br>";
else if(cmd==="scan") out.innerHTML+="System Secure âœ”<br>";
else if(cmd==="hash"){

let msg="hello";
let buf=new TextEncoder().encode(msg);
let hash=await crypto.subtle.digest("SHA-256",buf);
out.innerHTML+=Array.from(new Uint8Array(hash)).map(b=>b.toString(16)).join("")+"<br>";

}
else if(cmd==="ip"){

let res=await fetch("https://api.ipify.org?format=json");
let d=await res.json();
out.innerHTML+="IP: "+d.ip+"<br>";

}
else out.innerHTML+="Unknown<br>";

}

async function askAI(){

let res=await fetch("https://api.quotable.io/random");
let data=await res.json();

answer.innerText=data.content;

}

</script>

</body>
</html>