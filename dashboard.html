<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyber Dashboard</title>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<style>

body{
margin:0;
background:#0d1117;
color:#00ff9c;
font-family:monospace;
display:flex;
}

.sidebar{
width:220px;
background:black;
height:100vh;
padding:20px;
}

.sidebar button{
display:block;
width:100%;
margin:10px 0;
padding:10px;
background:black;
border:1px solid #00ff9c;
color:#00ff9c;
cursor:pointer;
}

.main{
flex:1;
padding:20px;
}

.card{
border:1px solid #00ff9c;
padding:20px;
margin:20px 0;
}

input{
padding:10px;
background:black;
border:1px solid #00ff9c;
color:#00ff9c;
width:250px;
}

</style>

</head>
<body>

<div class="sidebar">

<h3>Cyber Dashboard</h3>

<button onclick="show('terminal')">Terminal</button>
<button onclick="show('scanner')">File Scanner</button>
<button onclick="show('ai')">AI Assistant</button>
<button onclick="show('profile')">Profile</button>
<button onclick="admin()">Admin</button>
<button onclick="logout()">Logout</button>

</div>

<div class="main">

<div id="terminal" class="card">
<h2>Advanced Terminal</h2>
<div id="output"></div>
<input id="cmd" placeholder="Enter command">
<button onclick="run()">Run</button>
</div>

<div id="scanner" class="card" style="display:none">
<h2>File Scanner</h2>
<input type="file" id="file">
<button onclick="scanFile()">Scan</button>
<pre id="scanResult"></pre>
</div>

<div id="ai" class="card" style="display:none">
<h2>Gemini AI Assistant</h2>
<input id="question" placeholder="Ask something">
<button onclick="askAI()">Ask</button>
<pre id="answer"></pre>
</div>

<div id="profile" class="card" style="display:none">
<h2>User Profile</h2>
<p id="user"></p>
</div>

</div>

<script>

/* Firebase Config */

const firebaseConfig={
apiKey:"AIzaSyB3ofBLYop3CIOKcE4PaFOyo3pGa4Aa8QM",
authDomain:"cyberdashboard-4ee87.firebaseapp.com",
projectId:"cyberdashboard-4ee87",
appId:"1:133424629804:web:6457a1eb1282cc88ada989"
};

firebase.initializeApp(firebaseConfig);

const auth=firebase.auth();
const db=firebase.firestore();

let currentUser;

/* Auth Check */

auth.onAuthStateChanged(user=>{

if(!user) location="index.html";

currentUser=user;

document.getElementById("user").innerText="Email: "+user.email;

/* Save log */

db.collection("logs").add({
email:user.email,
action:"login",
time:Date.now()
});

});

/* Navigation */

function show(id){

terminal.style.display="none";
scanner.style.display="none";
ai.style.display="none";
profile.style.display="none";

document.getElementById(id).style.display="block";

}

/* Logout */

function logout(){
auth.signOut();
location="index.html";
}

/* Admin */

function admin(){

if(currentUser.email==="admin@gmail.com"){
location="admin.html";
}else{
alert("Not Admin");
}

}

/* Terminal Commands */

async function run(){

let cmdValue=document.getElementById("cmd").value;
let out=document.getElementById("output");

if(cmdValue==="help"){
out.innerHTML+="Commands: help whoami date scan hash ip encrypt clear<br>";
}
else if(cmdValue==="whoami"){
out.innerHTML+="Cyber User<br>";
}
else if(cmdValue==="date"){
out.innerHTML+=new Date()+"<br>";
}
else if(cmdValue==="scan"){
out.innerHTML+="System Secure âœ”<br>";
}
else if(cmdValue==="ip"){

let res=await fetch("https://api.ipify.org?format=json");
let d=await res.json();

out.innerHTML+="IP: "+d.ip+"<br>";

}
else if(cmdValue==="encrypt"){

let text="hello";
let encoded=btoa(text);

out.innerHTML+=encoded+"<br>";

}
else if(cmdValue==="clear"){
out.innerHTML="";
}
else{
out.innerHTML+="Unknown command<br>";
}

}

/* File Scanner */

async function scanFile(){

let file=document.getElementById("file").files[0];

if(!file) return;

let buffer=await file.arrayBuffer();

let hash=await crypto.subtle.digest("SHA-256",buffer);

let hex=Array.from(new Uint8Array(hash))
.map(b=>b.toString(16).padStart(2,"0")).join("");

document.getElementById("scanResult").innerText=
"File: "+file.name+
"\nSize: "+file.size+" bytes"+
"\nSHA256: "+hex+
"\nRisk Level: Low";

}

/* Gemini AI */

async function askAI(){

let question=document.getElementById("question").value;

/* ðŸ”‘ PASTE YOUR GEMINI KEY HERE */
let API_KEY="AIzaSyAG7_MPAgrgNMrrNBCppPjwGd2ISm1xM7o";

let response=await fetch(
`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`,
{
method:"POST",
headers:{
"Content-Type":"application/json"
},
body:JSON.stringify({
contents:[
{
parts:[
{
text:"You are a cybersecurity expert. Answer: "+question
}
]
}
]
})
});

let data=await response.json();

let text=data.candidates?.[0]?.content?.parts?.[0]?.text || "No response";

document.getElementById("answer").innerText=text;

}

</script>

</body>
</html>